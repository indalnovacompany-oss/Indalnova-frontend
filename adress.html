<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="fast2sms" content="UpbNJVyCmfK2DRHz4fkU8JmvigwQirhi">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="media.css">
    <link rel="stylesheet" href="cart.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Chong+Modern&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <title>Shipping Address | Indalnova</title>
    <style>
        * {
            margin: 0px;
            padding: 0px;
        }

        body {
            font-family: 'Poppins', sans-serif;

        }

        .address-container {
            max-width: 600px;
            margin: 20px auto 30px auto;
            /* 20px space from top, auto center, 30px bottom */
            padding: 0 15px;
        }


        .address-card {
            border: 1px solid #ccc;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
        }

        .select-btn,
        #add-new-btn,
        #addressForm button {
            cursor: pointer;
            padding: 8px 12px;
            margin-top: 10px;
            border: none;
            height: auto;
            background-color: brown;
            color: white;
            border-radius: 10px;
        }

        #new-address-form {
            margin-top: 20px;
            border: 1px solid #ccc;
            padding: 15px;
            border-radius: 5px;
            display: none;
        }

        input {
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            border-radius: 4px;
            border: 1px solid #ccc;
        }

        h2 {
            text-align: center;
            margin-bottom: 20px;
            color: brown;
            font-size: 15px;
        }

        .pin {
            margin-top: 30px;
        }

        input {
            height: 50px;
            width: 100%;
            padding: 10px;
            border-radius: 10px;
            font-size: 15px;
        }

        .state-city,
        .payment-option {
            display: flex;
            gap: 20px;
        }

        input[type="radio"] {
            accent-color: green;
            /* modern browsers */
        }

        label {
            display: flex;
            justify-content: center;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            font-size: 20px;
        }

        .payment-options {
            margin: 20px 0;
        }

        .payment-options p {
            margin-bottom: 12px;
            font-weight: bold;
            font-size: 16px;
            color: #444;
        }

        .payment-card {
            display: block;
            border: 2px solid #ccc;
            border-radius: 10px;
            padding: 12px 16px;
            margin-bottom: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .payment-card:hover {
            border-color: #666;
            background: #f9f9f9;
        }

        .payment-card input[type="radio"] {
            display: none;

        }

        .payment-card .card-content {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
            color: #333;
        }

        .payment-card .icon {
            font-size: 18px;
        }

        .payment-card input[type="radio"]:checked+.card-content {
            border-left: 5px solid brown;
            color: brown;
            font-weight: bold;
        }

        .offers-section {
            align-items: center;
        }

        @media screen and (max-width:780px) {
            .address-container {
                max-width: 350px;
            }
        }

        /* Navbar override */
    </style>
</head>

<body>

    <!-- Address Section -->
    <section>
        <div class="address-container">
            <h2>Select Shipping Address</h2>
            <div id="existing-addresses"></div>

            <button id="add-new-btn">Add New <i class="fa-solid fa-plus"></i></button>

            <div class="pin">
                <input type="number" name="pincode" id="pin" placeholder="Enter Pin code" required>
                <p id="result"></p>
            </div>

            <div class="address-form" style="display: none;">
                <div class="state-city">
                    <input type="text" name="state" id="state" placeholder="State" required>
                    <input type="text" name="city" id="city" placeholder="City" required>
                </div>
                <input type="name" name="name" id="name" placeholder="Name" required>
                <input type="text" name="adress" id="adress" placeholder="Address" required>
                <input type="text" name="landmark" id="Landmark" placeholder="Landmark">
                <input type="number" name="Phone" id="Phone" placeholder="Mobile Number">
                <div class="payment-options">
                    <p><strong>Select Payment Method</strong></p>

                    <label class="payment-card">
                        <input type="radio" name="paymentMethod" value="COD" required>
                        <div class="card-content">
                            <span class="icon">üíµ</span>
                            <span>Cash on Delivery</span>
                        </div>
                    </label>

                    <label class="payment-card">
                        <input type="radio" name="paymentMethod" value="ONLINE" required>
                        <div class="card-content">
                            <span class="icon">üí≥</span>
                            <span>Online Payment (UPI / Card / Netbanking)</span>
                        </div>
                    </label>
                </div>
            </div>
        </div>
    </section>
    <section>
        <div class="offers-section">
            <div class="coupn">
                <div class="coupn-det">
                    <div class="coupn-header">
                        <span id="coupn-note">View all coupons</span>
                        <span id="toggel">
                            <i class="fa-solid fa-eye" id="eye" style="color:black"></i>
                            <i class="fa-solid fa-eye-slash" id="eyeSlash" style="color: black; display:none;"></i>
                        </span>
                    </div>
                    <div class="coupon-items" id="coupon-items" style="display:none;">
                        <div class="coupon-item">
                            <input type="text" id="manual-coupon" placeholder="Enter code">
                            <button class="apply" data-type="percent" data-value="10">Apply</button>
                        </div>
                        <div class="coupon-item">
                            <span class="coupon-code">CODE5 - 5% off</span>
                            <button class="apply-coupon" data-type="percent" data-value="10">Apply</button>
                        </div>
                        <div class="coupon-item">
                            <span class="coupon-code">UPI 10 - ‚Çπ10 off</span>
                            <button class="apply-coupon" data-type="fixed" data-value="50">Apply</button>
                        </div>
                        <div class="coupon-item">
                            <span class="coupon-code">NEWUSER - ‚Çπ20 off</span>
                            <button class="apply-coupon" data-type="fixed" data-value="100">Apply</button>
                        </div>
                    </div>
                </div>
            </div>
            <div class="upi">
                <div class="upi-det">
                    <span id="upi-note">Extra Discount on all UPI Payments</span>
                    <span id="upi-image"><img src="Assets/upi.png" height="25px" alt=""></span>
                </div>
            </div>
        </div>
        <div class="checkout-bar">
            <span class="total-text">Total: ‚Çπ0</span>
            <button class="checkout-btn"><i class="fa-solid fa-lock"></i> Proceed to Checkout</button>
    </section>
    </div>
    <script src="script.js"></script>
    <script>

        document.addEventListener("DOMContentLoaded", () => {
            const addBtn = document.getElementById("add-new-btn");
            const pinSection = document.querySelector(".pin");
            const pinInput = document.getElementById("pin");
            const result = document.getElementById("result");
            const addressForm = document.querySelector(".address-form");
            const stateInput = document.getElementById("state");
            const cityInput = document.getElementById("city");

            // hide pin & form initially
            pinSection.style.display = "none";
            addressForm.style.display = "none";

            // when "Add New" clicked ‚Üí show pin only
            addBtn.addEventListener("click", () => {
                addBtn.style.display = "none";
                pinSection.style.display = "block";
                pinInput.focus();
            });

            let timeout;
            pinInput.addEventListener("input", () => {
                clearTimeout(timeout);
                const pin = pinInput.value;

                if (/^[1-9][0-9]{5}$/.test(pin)) {
                    result.textContent = "Checking... ‚è≥";

                    timeout = setTimeout(() => {
                        fetch(`https://api.postalpincode.in/pincode/${pin}`)
                            .then(res => res.json())
                            .then(data => {
                                if (data[0].Status === "Success") {
                                    const postOffice = data[0].PostOffice[0];
                                    stateInput.value = postOffice.State;
                                    cityInput.value = postOffice.District;

                                    addressForm.style.display = "block";
                                    result.textContent = "PIN exists ‚úÖ";
                                } else {
                                    addressForm.style.display = "none";
                                    stateInput.value = "";
                                    cityInput.value = "";
                                    result.textContent = "Please enter a valid Indian PIN code ‚ùå";
                                }
                            })
                            .catch(err => {
                                console.error(err);
                                addressForm.style.display = "none";
                                stateInput.value = "";
                                cityInput.value = "";
                                result.textContent = "Error checking PIN ‚ùå";
                            });
                    }, 500);
                } else {
                    addressForm.style.display = "none";
                    stateInput.value = "";
                    cityInput.value = "";
                    result.textContent = "";
                }
            });
        });


    </script>
    <script src="cart.js"></script>
</body>

</html>
