<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="media.css">
  <title>Checkout | Indalnova</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background-image: url(Assets/bg.png);
      padding-bottom: 100px;
    }

    .container {
      width: 95%;
      max-width: 1200px;
      margin: 40px auto;
      display: flex;
      flex-direction: column;
      gap: 30px;
    }

    h2 {
      font-size: 20px;
      margin-bottom: 15px;
      color: brown;
    }

    /* Address Section */
    .address-section {
      width: 100%;
      background: white;
      padding: 25px;
      border-radius: 12px;
    }

    #add-new-btn,
    .save-btn,
    .delete-btn {
      cursor: pointer;
      padding: 8px 14px;
      background: brown;
      color: white;
      border: none;
      border-radius: 8px;
      margin-top: 10px;
      font-size: 14px;
    }

    #add-new-btn:hover,
    .save-btn:hover,
    .delete-btn:hover {
      background: #8b0000;
    }

    .pin,
    .address-form {
      margin-top: 15px;
    }

    input[type="text"],
    input[type="number"],
    input[type="name"] {
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      border: 1px solid #ccc;
      margin-bottom: 10px;
      font-size: 14px;
    }

    .state-city {
      display: flex;
      gap: 10px;
    }

    .state-city input {
      flex: 1;
    }

    .existing-address-card {
      border: 1px solid #ccc;
      padding: 10px;
      margin-bottom: 10px;
      border-radius: 8px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: 0.3s ease;
    }

    .existing-address-card.selected {
      border: 2px solid green;
      background: #eafaea;
    }

    .existing-address-card label {
      flex: 1;
      cursor: pointer;
    }

    /* Order Summary */
    .order-summary-section {
      width: 70%;
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 25px;
      border-radius: 12px;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.1);
    }

    @media (max-width: 768px) {
      .order-summary-section {
        width: 100%;
      }

      .state-city {
        flex-direction: column;
      }
    }

    .coupon-section {
      margin-bottom: 20px;
    }

    .coupon-section input {
      width: 65%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
    }

    .coupon-section button {
      padding: 10px 15px;
      margin-left: 10px;
      background: brown;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }

    .summary-details {
      margin-top: 20px;
      font-size: 16px;
    }

    .summary-details p {
      margin: 8px 0;
    }

    .summary-details strong {
      font-size: 18px;
    }

    .checkout-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: white;
      border-top: 2px solid #ddd;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 12px 20px;
      z-index: 1000;
      color: black;
      font-weight: 500;
    }

    .continue {
      height: 40px;
      width: 100px;
      background-color: brown;
      color: white;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      font-weight: 600;
    }
  </style>
</head>

<body>
 <section>
     <div class="heading1">
            <h4>Click here to Explore Our Best Products</h4>
        </div>
        <div class="navbar">
            <div class="logo">Indalnova</div>
            <div class="nav-links">
                <a href="skincare.html">Skine care</a>
                <a href="perfume.html">Perfume</a>
                <a href="#">Track order</a>
                <a href="#">Offers*</a>
            </div>
            <div class="options">
                <!-- Hamburger menu -->
                <span id="ham" onclick="hideelement()">
                    <i class="fa-solid fa-bars" style="color: brown;"></i>
                </span>
            </div>

        </div>
        </div>
    </section>
    <!-- Mobile / toggle nav -->
    <section>
        <div class="nav-2" aria-hidden="true">
            <div class="skincare"><a href="skincare.html">Skine Care</a></div>
            <div class="perfume"><a href="perfume.html">Perfume</a></div>
            <div class="New"><a href="#">New products</a></div>
            <div class="track"><a href="#">Track order</a></div>
            <div class="return"><a href="#">Return order</a></div>
            <div class="backbtn"><button onclick="back()">Back</button></div>
        </div>
    </section>

  <div class="container">
    <!-- Address Section -->
    <div class="address-section">
      <h2>Select Shipping Address</h2>
      <div id="existing-addresses"></div>
      <button id="add-new-btn">Add New <i class="fa-solid fa-plus"></i></button>

      <div class="pin" style="display:none;">
        <input type="number" name="pincode" id="pin" placeholder="Enter Pin code" required>
        <p id="pin-result"></p>
      </div>

      <div class="address-form" style="display:none;">
        <div class="state-city">
          <input type="text" id="state" placeholder="State" required>
          <input type="text" id="city" placeholder="City" required>
        </div>
        <input type="name" id="name" placeholder="Name" required>
        <input type="text" id="adress1" placeholder="Address line 1" required>
        <input type="text" id="adress2" placeholder="Address line 2">
        <input type="text" id="landmark" placeholder="Landmark">
        <input type="number" id="phone" placeholder="Mobile Number" required>
        <button class="save-btn">Save Address</button>
      </div>
    </div>

    <!-- Order Summary -->
    <div class="order-summary-section">
      <div class="coupon-section">
        <h2>Apply Coupon</h2>
        <input type="text" id="coupon-input" placeholder="Enter coupon code">
        <button id="apply-coupon">Apply</button>
        <p id="coupon-message"></p>
      </div>

      <section id="order-summary">
        <h2>Order Summary</h2>
        <div id="order-items"></div>
        <div class="summary-details">
          <p>Subtotal: ₹<span id="subtotal">0</span></p>
          <p>Discount: -₹<span id="discount">0</span></p>
          <p>Delivery: <span style="color:green">Free Shipping</span></p>
          <p><strong>Final Total: ₹<span id="final-total">0</span></strong></p>
        </div>
      </section>
    </div>
  </div>

  <div class="checkout-bar">
    <span class="total-text">Total: ₹0</span>
    <button class="continue">Continue</button>
  </div>
 <script src="script.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const addBtn = document.getElementById("add-new-btn");
      const pinSection = document.querySelector(".pin");
      const pinInput = document.getElementById("pin");
      const pinResult = document.getElementById("pin-result");
      const addressForm = document.querySelector(".address-form");
      const stateInput = document.getElementById("state");
      const cityInput = document.getElementById("city");
      const nameInput = document.getElementById("name");
      const addr1Input = document.getElementById("adress1");
      const addr2Input = document.getElementById("adress2");
      const landmarkInput = document.getElementById("landmark");
      const phoneInput = document.getElementById("phone");
      const saveBtn = document.querySelector(".save-btn");
      const existingAddressesEl = document.getElementById("existing-addresses");

      const couponInput = document.getElementById("coupon-input");
      const applyCouponBtn = document.getElementById("apply-coupon");
      const couponMessage = document.getElementById("coupon-message");

      const subtotalEl = document.getElementById("subtotal");
      const discountEl = document.getElementById("discount");
      const finalTotalEl = document.getElementById("final-total");
      const totalText = document.querySelector(".total-text");

      let addresses = [];
      let selectedAddressId = null;
      let subtotal = 2000;
      let discount = 0;

      const validCoupons = { "SAVE10": 200, "NEWUSER": 500 };

      function updateTotals() {
        subtotalEl.textContent = subtotal;
        discountEl.textContent = discount;
        finalTotalEl.textContent = subtotal - discount;
        totalText.textContent = "Total: ₹" + (subtotal - discount);
      }
      updateTotals();

      function renderAddresses() {
        existingAddressesEl.innerHTML = "";
        addresses.forEach(addr => {
          const card = document.createElement("div");
          card.className = "existing-address-card" + (addr.id === selectedAddressId ? " selected" : "");
          card.innerHTML = `
            <label>
              <input type="radio" name="address" ${addr.id === selectedAddressId ? "checked" : ""} value="${addr.id}">
              <strong>${addr.name}</strong><br>
              ${addr.addr1}, ${addr.addr2}<br>
              ${addr.city}, ${addr.state}<br>
              Phone: ${addr.phone}
            </label>
            <button class="delete-btn"><i class="fa-solid fa-trash"></i></button>
          `;
          existingAddressesEl.appendChild(card);

          const radio = card.querySelector('input[type="radio"]');
          radio.addEventListener("change", () => {
            selectedAddressId = addr.id;
            renderAddresses();
          });

          card.querySelector(".delete-btn").addEventListener("click", () => {
            addresses = addresses.filter(a => a.id !== addr.id);
            if (selectedAddressId === addr.id) selectedAddressId = null;
            renderAddresses();
          });
        });
      }

      // Show pin input on Add New
      addBtn.addEventListener("click", () => {
        addBtn.style.display = "none";
        pinSection.style.display = "block";
        pinInput.focus();
      });

      // PIN lookup
      let timeout;
      pinInput.addEventListener("input", () => {
        clearTimeout(timeout);
        const pin = pinInput.value;
        if (/^[1-9][0-9]{5}$/.test(pin)) {
          pinResult.textContent = "Checking... ⏳";
          timeout = setTimeout(() => {
            fetch(`https://api.postalpincode.in/pincode/${pin}`)
              .then(res => res.json())
              .then(data => {
                if (data[0].Status === "Success") {
                  const postOffice = data[0].PostOffice[0];
                  stateInput.value = postOffice.State;
                  cityInput.value = postOffice.District;
                  addressForm.style.display = "block";
                  pinResult.textContent = "PIN exists ✅";
                } else {
                  addressForm.style.display = "none";
                  stateInput.value = cityInput.value = "";
                  pinResult.textContent = "Invalid Indian PIN ❌";
                }
              }).catch(err => {
                addressForm.style.display = "none";
                stateInput.value = cityInput.value = "";
                pinResult.textContent = "Error checking PIN ❌";
              });
          }, 500);
        } else {
          addressForm.style.display = "none";
          stateInput.value = cityInput.value = "";
          pinResult.textContent = "";
        }
      });

      // Save address
      saveBtn.addEventListener("click", () => {
        const name = nameInput.value.trim();
        const addr1 = addr1Input.value.trim();
        const addr2 = addr2Input.value.trim();
        const city = cityInput.value.trim();
        const state = stateInput.value.trim();
        const phone = phoneInput.value.trim();

        if (name && addr1 && city && state && phone) {
          const id = "a" + Date.now();
          addresses.push({ id, name, addr1, addr2, city, state, phone });
          renderAddresses();

          // Reset form
          pinSection.style.display = "none";
          addressForm.style.display = "none";
          addBtn.style.display = "block";
          pinInput.value = "";
          stateInput.value = cityInput.value = "";
          nameInput.value = "";
          addr1Input.value = "";
          addr2Input.value = "";
          landmarkInput.value = "";
          phoneInput.value = "";
        } else {
          alert("Please fill all required fields");
        }
      });

      // Coupon apply
      applyCouponBtn.addEventListener("click", () => {
        const code = couponInput.value.trim().toUpperCase();
        if (validCoupons[code]) {
          discount = validCoupons[code];
          couponMessage.textContent = `Coupon applied! ₹${discount} discount.`;
        } else {
          discount = 0;
          couponMessage.textContent = "Invalid coupon code";
        }
        updateTotals();
      });

      // Render initial totals
      updateTotals();
    });
  </script>
</body>

</html>


