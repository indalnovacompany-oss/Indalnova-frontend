<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Order Loader Animation</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <style>
    :root {
      --primary: #275efe;
      --primary-light: #7699ff;
      --dark: #1c212e;
      --grey-dark: #3f4656;
      --grey: #6c7486;
      --grey-light: #cdd9ed;
      --white: #fff;
      --green: #16bf78;
      --sand: #dcb773;
      --sand-light: #edd9a9;
    }

    button {
      height: 50px;
      width: 200px;
      border-radius: 10px;
      background-color: green;
      color: white;
      margin-top: 40px;
      border: none;
    }

    /* Fullscreen loader overlay */
    .loader-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.3);
      /* semi-transparent background */
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .order {
      border: 0;
      background: var(--dark);
      position: relative;
      height: 250px;
      width: 250px;
      padding: 0;
      outline: none;
      cursor: pointer;
      border-radius: 50%;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .order span {
      --o: 1;
      position: absolute;
      left: 0;
      right: 0;
      text-align: center;
      line-height: 24px;
      color: var(--white);
      font-size: 20px;
      font-weight: 550;
      opacity: var(--o);
      transition: opacity 0.3s ease;
    }

    .order span.default {
      transition-delay: 0.3s;
    }

    .order span.success {
      --offset: 16px;
      --o: 0;
    }

    .order span.success svg {
      width: 12px;
      height: 10px;
      display: inline-block;
      vertical-align: top;
      fill: none;
      margin: 7px 0 0 4px;
      stroke: var(--green);
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-dasharray: 16px;
      stroke-dashoffset: var(--offset);
      transition: stroke-dashoffset 0.3s ease;
    }

    .order.animate .default {
      --o: 0;
      transition-delay: 0s;
    }

    .order.animate .success {
      --offset: 0;
      --o: 1;
      transition-delay: 7s;
    }

    .order.animate .success svg {
      transition-delay: 7.3s;
    }

    .order .truck {
      width: 60px;
      height: 41px;
      left: 100%;
      z-index: 1;
      position: absolute;
      transform: translateX(24px);
    }

    .order .truck .back {
      left: 0;
      width: 60px;
      height: 41px;
      z-index: 1;
      background: linear-gradient(var(--white), var(--grey-light));
      border-radius: 2px;
      position: absolute;
    }

    .order .truck .front {
      overflow: hidden;
      position: absolute;
      border-radius: 2px 9px 9px 2px;
      width: 26px;
      height: 41px;
      left: 60px;
    }

    .order .truck .front:after {
      border-radius: 2px 9px 9px 2px;
      background: var(--primary);
      width: 24px;
      height: 41px;
      right: 0;
      content: "";
      position: absolute;
    }

    .order .truck .front .window {
      overflow: hidden;
      border-radius: 2px 8px 8px 2px;
      background: var(--primary-light);
      width: 22px;
      height: 41px;
      position: absolute;
      left: 2px;
      z-index: 1;
    }

    .order .truck .light {
      width: 3px;
      height: 8px;
      left: 83px;
      transform-origin: 100% 50%;
      position: absolute;
      border-radius: 2px;
      transform: scaleX(0.8);
      background: #f0dc5f;
    }

    .order .truck .light.top {
      top: 4px;
    }

    .order .truck .light.bottom {
      bottom: 4px;
    }

    .order .box {
      --start: var(--sand-light);
      --stop: var(--sand);
      width: 21px;
      height: 21px;
      right: 100%;
      background: linear-gradient(var(--start), var(--stop));
      border-radius: 2px;
      position: absolute;
    }

    .order .lines {
      opacity: 0;
      position: absolute;
      height: 3px;
      background: var(--white);
      border-radius: 2px;
      width: 6px;
      left: 100%;
      box-shadow: 15px 0 0 var(--white), 30px 0 0 var(--white), 45px 0 0 var(--white),
        60px 0 0 var(--white), 75px 0 0 var(--white);
    }

    .order.animate .truck {
      animation: truck 10s ease forwards;
    }

    .order.animate .box {
      animation: box 10s ease forwards;
    }

    .order.animate .lines {
      animation: lines 10s ease forwards;
    }

    @keyframes truck {

      10%,
      30% {
        transform: translateX(-164px);
      }

      40% {
        transform: translateX(-104px);
      }

      60% {
        transform: translateX(-224px);
      }

      75%,
      100% {
        transform: translateX(24px);
      }
    }

    @keyframes lines {

      0%,
      30% {
        opacity: 0;
        transform: scaleY(0.7) translateX(0);
      }

      35%,
      65% {
        opacity: 1;
      }

      70% {
        opacity: 0;
      }

      100% {
        transform: scaleY(0.7) translateX(-400px);
      }
    }

    @keyframes box {

      8%,
      10% {
        transform: translateX(40px);
        opacity: 1;
      }

      25% {
        transform: translateX(112px);
        opacity: 1;
      }

      26% {
        transform: translateX(112px);
        opacity: 0;
      }

      27%,
      100% {
        transform: translateX(0px);
        opacity: 0;
      }
    }

    .success {
      display: flex;
      justify-content: center;
      align-items: center;
    }

    /* Confetti Canvas */
    canvas {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 2000;
    }
  </style>
</head>

<body>

  <!-- Loader Overlay -->
  <div class="loader-overlay" id="loader">
    <button class="order">
      <span class="default">Processing Order...</span>
      <span class="success">Order Placed <img src="Assets/conformationimg.png" height="20px" alt=""></span>
      <div class="box"></div>
      <div class="truck">
        <div class="back"></div>
        <div class="front">
          <div class="window"></div>
        </div>
        <div class="light top"></div>
        <div class="light bottom"></div>
      </div>
      <div class="lines"></div>
    </button>
  </div>

  <!-- Order Confirmation Page -->
  <div id="order-page" style="display:none; text-align:center; padding:50px; font-family:Roboto,Arial;margin-top: 50px;">
    <img src="Assets/conformationimg.png" height="100px" alt="">
    <h1>Thank you for your order!</h1>
    <p>Your order has been Placed successfully.</p>
    <p>Tracking ID will be updated shortly once your order gets confirmed.</p>
    <button onclick="alert('Redirect to homepage')">Continue Shopping</button>
  </div>

  <!-- Confetti Canvas -->
  <canvas id="confetti"></canvas>

  <script>
    $(document).ready(function () {
      const loader = $("#loader");
      const orderPage = $("#order-page");
      const button = $(".order");

      // Start truck animation
      button.addClass("animate");

      // After animation completes (10s)
      setTimeout(() => {
        loader.fadeOut(500, () => {
          orderPage.fadeIn(500);
          startConfetti(); // celebration effect
        });
      }, 10000);
    });

    // Confetti JS
    const canvas = document.getElementById("confetti");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    let confettiPieces = [];
    let confettiActive = false;

    function ConfettiPiece() {
      this.x = Math.random() * canvas.width;
      this.y = Math.random() * canvas.height - canvas.height;
      this.size = Math.random() * 8 + 4;
      this.speed = Math.random() * 3 + 2;
      this.color = `hsl(${Math.random() * 360}, 100%, 50%)`;
    }

    function createConfetti() {
      for (let i = 0; i < 150; i++) {
        confettiPieces.push(new ConfettiPiece());
      }
    }

    function drawConfetti() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      confettiPieces.forEach((p) => {
        ctx.beginPath();
        ctx.fillStyle = p.color;
        ctx.fillRect(p.x, p.y, p.size, p.size);
        ctx.closePath();
      });
    }

    function updateConfetti() {
      confettiPieces.forEach((p) => {
        p.y += p.speed;
        p.x += Math.sin(p.y * 0.01) * 2;
      });
      confettiPieces = confettiPieces.filter(p => p.y < canvas.height + 20);
    }

    function loopConfetti() {
      if (!confettiActive) return;
      drawConfetti();
      updateConfetti();
      requestAnimationFrame(loopConfetti);
    }

    function startConfetti() {
      confettiActive = true;
      createConfetti();
      loopConfetti();
      // Stop after 5s
      setTimeout(() => {
        confettiActive = false;
        ctx.clearRect(0, 0, canvas.width, canvas.height);
      }, 5000);
    }
  </script>

</body>

</html>
